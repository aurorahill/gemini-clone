(()=>{"use strict";const e=document.querySelector(".typing-area__typing-form"),t=document.querySelector(".chat-list"),n=document.querySelectorAll(".header__suggestion"),s=document.querySelector("#toggle-theme-button"),a=document.querySelector("#delete-chat-button");let o=null,l=!1;const c=()=>{const e=localStorage.getItem("savedChats"),n="light_mode"===localStorage.getItem("themeColor");document.body.classList.toggle("light_mode",n),s.innerText=n?"dark_mode":"light_mode",t.innerHTML=e||"",document.body.classList.toggle("hide-header",e),t.scrollTo(0,t.scrollHeight)};c();const i=function(e){const t=document.createElement("div");for(var n=arguments.length,s=new Array(n>1?n-1:0),a=1;a<n;a++)s[a-1]=arguments[a];return t.classList.add("chat-list__message",...s),t.innerHTML=e,t},r=e=>{const t=e.target.parentElement.querySelector(".chat-list__text").innerText;navigator.clipboard.writeText(t),e.target.innerText="check",setTimeout((()=>e.target.innerText="content_copy"),1e3)},d=()=>{const e=i('<div class="chat-list__message-content">\n            <img\n              src="./images/gemini.svg"\n              alt="Gemini Image"\n              class="chat-list__avatar"\n            />\n            <p class="chat-list__text"></p>\n            <div class="chat-list__loading-indicator">\n              <div class="chat-list__loading-bar"></div>\n              <div class="chat-list__loading-bar"></div>\n              <div class="chat-list__loading-bar"></div>\n            </div>\n          </div>\n          <span class="chat-list__icon material-symbols-rounded">\n            content_copy\n          </span>',"chat-list__incoming","chat-list__loading");t.appendChild(e),(async e=>{const n=e.querySelector(".chat-list__text");try{const s=await fetch("https://generativelanguage.googleapis.com/v1/models/gemini-pro:generateContent?key=your API_KEY",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{role:"user",parts:[{text:o}]}]})}),a=await s.json();if(!s.ok)throw new Error(a.error.message);const c=a?.candidates[0].content.parts[0].text.replace(/\*\*(.*?)\*\*/g,"$1");((e,n,s)=>{const a=e.split(" ");let o=0;const c=setInterval((()=>{n.innerText+=(0===o?"":" ")+a[o++],s.querySelector(".chat-list__icon").classList.add("hide"),o===a.length&&(clearInterval(c),l=!1,s.querySelector(".chat-list__icon").classList.remove("hide"),localStorage.setItem("savedChats",t.innerHTML)),t.scrollTo(0,t.scrollHeight)}),75)})(c,n,e)}catch(e){l=!1,n.innerText=e.message,n.classList.add("error")}finally{e.classList.remove("chat-list__loading")}})(e),t.scrollTo(0,t.scrollHeight),t.querySelectorAll(".chat-list__icon").forEach((e=>{e.addEventListener("click",r)}))},g=()=>{if(o=e.querySelector(".typing-area__typing-input").value.trim()||o,!o||l)return;l=!0;const n=i('<div class="chat-list__message-content">\n          <img\n            src="./images/user.png"\n            alt="User Image"\n            class="chat-list__avatar"\n          />\n          <p class="chat-list__text"></p>\n        </div>',"chat-list__outgoing");n.querySelector(".chat-list__text").innerText=o,t.appendChild(n),e.reset(),t.scrollTo(0,t.scrollHeight),document.body.classList.add("hide-header"),setTimeout(d,400)};n.forEach((e=>{e.addEventListener("click",(()=>{o=e.querySelector(".header__suggestion-text").innerText,g()}))})),s.addEventListener("click",(()=>{const e=document.body.classList.toggle("light_mode");localStorage.setItem("themeColor",e?"light_mode":"dark_mode"),s.innerText=e?"dark_mode":"light_mode"})),a.addEventListener("click",(()=>{t.querySelector(".chat-list__text")&&!t.querySelector(".chat-list__text").classList.contains("error")&&(t.innerText="",document.body.classList.remove("hide-header")),localStorage.savedChats&&confirm("Are you sure you want to delete all messages?")&&(localStorage.removeItem("savedChats"),c())})),document.querySelector(".typing-area__typing-input").addEventListener("keydown",(e=>{13===e.keyCode&&document.querySelector("#send-button").click()})),e.addEventListener("submit",(e=>{e.preventDefault(),g()}))})();